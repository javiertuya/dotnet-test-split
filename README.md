# dotnet-test-split

Splits `dotnet test` trx files into separate junit xml files like those generated by maven surefire report plugin. 

Can be used to generate html reports using some tools like `junitreport` ant task.

## Usage

From the solution folder, run your tests specifying a trx logger, e.g. given the project MyProject a trx report is generated at the reports folder:

```
dotnet test MyProject/MyProject.csproj --logger "trx;LogFileName=../../reports/mstest-report.trx"
```

Install as a local or global [.Net Core tool](https://docs.microsoft.com/es-es/dotnet/core/tools/dotnet-tool-install):
```
dotnet tool install NetcoreJunitSplit
```

Run the `NetcoreJunitSplit` tool, passing the trx file as parameter.
This will place each junit xml report file at the report folder, one file per test class

```
NetcoreJunitSplit reports/mstest-report.trx
```

If you want generate [junit reports using ant](https://ant.apache.org/manual/Tasks/junitreport.html), 
the below task will generate the two different views of the html reports in folders `junit-frames` and `junit-noframes`:

```
<junitreport todir="reports">
  <fileset dir="reports">
    <include name="TEST-*.xml" />
  </fileset>
  <report format="frames" todir="reports/junit-frames" />
  <report format="noframes" todir="reports/junit-noframes" />
</junitreport>
```

These reports can be exported to some tools, e.g. to exportthe html report with frames to Jenkins :

```
 publishHTML([allowMissing: true, alwaysLinkToLastBuild: true, keepAll: false, 
    reportDir: "reports/junit-frames", reportFiles: 'index.html', 
    reportName: 'JUnit report with frames'])
```
